##### PREFIX #####
set -g prefix C-b
unbind C-a

# --- Fix colors on startup (re-source once) ---
set-hook -g client-attached 'source-file ~/.tmux.conf'

##### COPY MODE (Wayland clipboard) #####
setw -g mode-keys vi

# Start selection (v)
bind -T copy-mode-vi v send -X begin-selection

# Yank selection → system clipboard
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "wl-copy"

# Mouse selection → system clipboard
bind -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "wl-copy"

##### SPLITS (Vim-style) #####
bind v split-window -h -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}"

##### PANE NAVIGATION (Vim keys) #####
bind -r j select-pane -D
bind -r k select-pane -U
bind -r h select-pane -L
bind -r l select-pane -R

##### RESIZE PANES (Vim-style) #####
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

##### COPY MODE (Vim bindings) #####
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

##### QUALITY OF LIFE #####
bind r source-file ~/.tmux.conf \; display-message "tmux config reloaded"
set -sg escape-time 0
set -g mouse on
set -g renumber-windows on
set -g history-limit 100000

##### TRUECOLOR #####
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

##### THEME COLORS (single source of truth) #####
# Deep green Arch theme
set -g @bg        "#0b1b0f"
set -g @bg_alt    "#122417"
set -g @green     "#98971a"
set -g @fg        "#d5c4a1"

##### GENERAL UI #####
set -g status on
set -g status-position top
set -g status-interval 1
set -g status-style "bg=#0b1b0f,fg=#98971a"

set -g message-style "bg=#122417,fg=#98971a"
set -g message-command-style "bg=#122417,fg=#98971a"

##### PANE BORDERS #####
set -g pane-border-style "fg=#122417"
set -g pane-active-border-style "fg=#98971a"

##### STATUS LEFT (user@hostname + session) #####
set -g status-left-length 100
set -g status-left "\
#[bg=#98971a,fg=#0b1b0f,bold] #[bg=#98971a,fg=#0b1b0f] #(whoami)@#H #[bg=#0b1b0f,fg=#98971a] \
#[bg=#98971a,fg=#0b1b0f] #[bg=#98971a,fg=#0b1b0f] #S #[bg=#0b1b0f,fg=#98971a] \
"

##### WINDOW LIST (uniform color) #####
setw -g window-status-format "\
#[bg=#98971a,fg=#0b1b0f] #[bg=#98971a,fg=#0b1b0f] #I:#W #[bg=#0b1b0f,fg=#98971a] \
"

setw -g window-status-current-format "\
#[bg=#98971a,fg=#0b1b0f,bold] #[bg=#98971a,fg=#0b1b0f] #I:#W* #[bg=#0b1b0f,fg=#98971a] \
"

##### STATUS RIGHT (time + date) #####
set -g status-right-length 100
set -g status-right "\
#[bg=#98971a,fg=#0b1b0f] #[bg=#98971a,fg=#0b1b0f] %H:%M:%S #[bg=#0b1b0f,fg=#98971a] \
#[bg=#98971a,fg=#0b1b0f] #[bg=#98971a,fg=#0b1b0f] %Y-%m-%d #[bg=#0b1b0f,fg=#98971a] \
"

